<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GIKI Pulse - Milestone 4</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        :root {
            --bg-cream: #F5F2EB;
            --coffee-brown: #4A3728;
            --clay: #8C6B5D;
            --vintage-orange: #BC6C25;
            --alert-red: #D65A31;
            --alert-blue: #3182CE;
            --success-green: #2F855A;
        }

        body {
            background-color: #1a1a1a;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            font-family: 'Georgia', serif;
        }

        .device-frame {
            width: 430px;
            height: 932px;
            background-color: var(--bg-cream);
            border-radius: 55px;
            border: 12px solid #2a2a2a;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
        }

        .notch {
            position: absolute;
            top: 15px; left: 50%; transform: translateX(-50%);
            width: 120px; height: 35px; background: black; border-radius: 20px; z-index: 1000;
        }

        .status-bar {
            padding: 15px 25px 0 25px;
            display: flex; justify-content: space-between;
            font-family: sans-serif; font-size: 14px; font-weight: 600; color: var(--coffee-brown);
            flex-shrink: 0;
        }

        .screen {
            display: none;
            flex: 1; height: 100%; overflow: hidden; position: relative;
            animation: fadeIn 0.3s ease;
        }
        .screen.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .app-content {
            height: calc(100% - 90px);
            overflow-y: auto; overflow-x: hidden; padding-bottom: 20px;
        }
        .app-content::-webkit-scrollbar { display: none; }

        .bottom-nav {
            position: absolute; bottom: 0; width: 100%; height: 90px;
            background: white; border-top: 1px solid #E5E0D8;
            display: flex; justify-content: space-evenly; align-items: center;
            padding-bottom: 20px; z-index: 50;
        }

        .nav-btn {
            background: none; border: none; color: #ccc;
            display: flex; flex-direction: column; align-items: center;
            font-size: 10px; font-weight: bold; width: 60px;
        }
        .nav-btn.active { color: var(--vintage-orange); transform: translateY(-2px); transition: 0.2s; }

        .text-coffee { color: var(--coffee-brown); }
        .bg-coffee { background-color: var(--coffee-brown); color: #F5F2EB; }
        
        .btn-vintage {
            background-color: var(--coffee-brown); color: #F5F2EB;
            border-radius: 15px; padding: 15px; font-weight: bold; width: 100%; border: none;
            transition: 0.1s;
        }
        .btn-vintage:active { transform: scale(0.98); }

        .card-vintage {
            background: white; border: 1px solid #E5E0D8; border-radius: 16px;
            padding: 15px; margin-bottom: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        }

        .modal-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(74, 55, 40, 0.6); backdrop-filter: blur(4px);
            z-index: 2000; display: none;
            align-items: flex-end; /* Slide up from bottom */
        }
        .modal-overlay.open { display: flex; animation: fadeIn 0.2s; }

        .modal-sheet {
            background: white; width: 100%; border-top-left-radius: 30px; border-top-right-radius: 30px;
            padding: 30px 25px 40px 25px;
            animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

        .payment-option {
            border: 1px solid #E5E0D8; padding: 15px; border-radius: 12px;
            display: flex; align-items: center; justify-content: space-between;
            margin-bottom: 10px; cursor: pointer; transition: 0.2s;
        }
        .payment-option.selected {
            border-color: var(--vintage-orange); background-color: #FFF8F0;
            box-shadow: 0 0 0 2px var(--vintage-orange);
        }

        .drawer {
            position: absolute; top: 0; left: 0; width: 75%; height: 100%;
            background: var(--bg-cream); z-index: 2000;
            transform: translateX(-100%); transition: transform 0.3s ease;
            border-right: 1px solid #ccc; box-shadow: 5px 0 15px rgba(0,0,0,0.1);
        }
        .drawer.open { transform: translateX(0); }
        .drawer-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 1500; display: none;
        }
        .drawer-overlay.open { display: block; }

    </style>
</head>
<body>

    <div class="device-frame">
        <div class="notch"></div>
        <div class="status-bar">
            <span>9:41</span>
            <span>5G <i data-lucide="battery" style="width:16px; display:inline;"></i></span>
        </div>

        <div class="drawer-overlay" id="drawerOverlay" onclick="toggleMenu()"></div>
        <div class="drawer" id="drawer">
            <div class="p-4 bg-coffee text-white pt-5">
                <div class="d-flex align-items-center gap-3 mt-4">
                    <div class="bg-white text-coffee rounded-circle d-flex align-items-center justify-content-center fw-bold" style="width:50px; height:50px;" id="menuAvatar">U</div>
                    <div>
                        <h5 class="m-0" id="menuName">User Name</h5>
                        <small id="menuEmail" style="opacity:0.7">email@giki.edu.pk</small>
                    </div>
                </div>
                <div class="mt-2">
                    <span class="badge bg-secondary" id="menuRole">Student</span>
                </div>
            </div>
            <div class="p-4">
                <ul class="list-unstyled d-grid gap-3">
                    <li class="d-flex gap-3 text-coffee"><i data-lucide="settings"></i> Settings</li>
                    <li class="d-flex gap-3 text-coffee"><i data-lucide="help-circle"></i> Help</li>
                    <li class="d-flex gap-3 text-coffee"><i data-lucide="info"></i> About</li>
                    <hr>
                    <li class="d-flex gap-3 text-danger fw-bold" onclick="showScreen('welcome')" style="cursor: pointer;"><i data-lucide="log-out"></i> Sign Out</li>
                </ul>
            </div>
        </div>

        <div class="modal-overlay" id="paymentModal">
            <div class="modal-sheet">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h4 class="text-coffee fw-bold m-0" style="font-family: serif;">Secure Checkout</h4>
                    <button class="btn btn-sm btn-light rounded-circle" onclick="closePaymentModal()"><i data-lucide="x"></i></button>
                </div>

                <div id="payStep1">
                    <div class="card-vintage bg-light border-0">
                        <small class="text-muted text-uppercase fw-bold">Item</small>
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="fw-bold text-coffee">Gym Membership</span>
                            <span class="fw-bold">PKR 2,000</span>
                        </div>
                        <small class="text-muted">Duration: 1 Month</small>
                    </div>

                    <h6 class="text-coffee fw-bold mt-4 mb-3">Select Method</h6>
                    
                    <div class="payment-option selected" onclick="selectPayment(this)">
                        <div class="d-flex align-items-center gap-3">
                            <i data-lucide="smartphone" class="text-success"></i>
                            <div>
                                <div class="fw-bold small">EasyPaisa / JazzCash</div>
                                <small class="text-muted" style="font-size:10px;">Direct Mobile Transfer</small>
                            </div>
                        </div>
                        <div class="rounded-circle bg-coffee" style="width:10px; height:10px;"></div>
                    </div>

                    <div class="payment-option" onclick="selectPayment(this)">
                        <div class="d-flex align-items-center gap-3">
                            <i data-lucide="credit-card" class="text-primary"></i>
                            <div>
                                <div class="fw-bold small">Debit / Credit Card</div>
                                <small class="text-muted" style="font-size:10px;">Visa / Mastercard</small>
                            </div>
                        </div>
                        <div class="rounded-circle border" style="width:10px; height:10px;"></div>
                    </div>

                    <button class="btn-vintage mt-4" onclick="processPayment()">Pay PKR 2,000</button>
                </div>

                <div id="payStep2" class="text-center py-5 d-none">
                    <div class="spinner-border text-coffee mb-3" role="status"></div>
                    <h5 class="fw-bold text-coffee">Processing Payment...</h5>
                    <p class="text-muted small">Please do not close this window.</p>
                </div>

                <div id="payStep3" class="text-center py-4 d-none">
                    <div class="bg-success text-white rounded-circle d-flex align-items-center justify-content-center mx-auto mb-3" style="width:60px; height:60px;">
                        <i data-lucide="check" size="30"></i>
                    </div>
                    <h4 class="fw-bold text-success">Payment Successful!</h4>
                    <p class="text-muted small mb-4">Your membership has been renewed successfully. ID: #TXN-9821</p>
                    <button class="btn-vintage" onclick="completePayment()">Done</button>
                </div>
            </div>
        </div>


        <div id="welcome" class="screen active">
            <div class="d-flex flex-column justify-content-center align-items-center h-100 p-4 text-center">
                <div class="bg-coffee rounded-circle d-flex align-items-center justify-content-center mx-auto mb-4" style="width: 100px; height: 100px;">
                    <i data-lucide="trophy" color="#F5F2EB" size="40"></i>
                </div>
                <h1 class="display-5 fw-bold text-coffee" style="font-family: serif;">GIKI Pulse</h1>
                <p class="text-clay text-uppercase fw-bold small letter-spacing-2">Sports Complex System</p>
                <button class="btn-vintage mt-5" onclick="showScreen('auth')">Get Started</button>
            </div>
        </div>

        <div id="auth" class="screen">
            <div class="d-flex flex-column justify-content-center h-100 p-4">
                <h2 class="display-6 fw-bold text-coffee mb-2" style="font-family: serif;">Sign In</h2>
                <p class="text-muted small mb-4">Select a persona to simulate:</p>
                <div class="d-grid gap-3">
                    <button onclick="login('mustafa')" class="card-vintage d-flex align-items-center gap-3 text-start w-100 border-0 cursor-pointer">
                        <div class="bg-primary rounded-circle text-white d-flex align-items-center justify-content-center fw-bold" style="width:40px; height:40px;">M</div>
                        <div class="flex-grow-1"><div class="fw-bold text-coffee">Mustafa</div><div class="small text-muted">Student</div></div>
                        <i data-lucide="chevron-right" class="text-muted"></i>
                    </button>
                    <button onclick="login('hamza')" class="card-vintage d-flex align-items-center gap-3 text-start w-100 border-0 cursor-pointer">
                        <div class="bg-success rounded-circle text-white d-flex align-items-center justify-content-center fw-bold" style="width:40px; height:40px;">H</div>
                        <div class="flex-grow-1"><div class="fw-bold text-coffee">Hamza</div><div class="small text-muted">Coach</div></div>
                        <i data-lucide="chevron-right" class="text-muted"></i>
                    </button>
                    <button onclick="login('aleena')" class="card-vintage d-flex align-items-center gap-3 text-start w-100 border-0 cursor-pointer">
                        <div class="bg-info rounded-circle text-white d-flex align-items-center justify-content-center fw-bold" style="width:40px; height:40px;">A</div>
                        <div class="flex-grow-1"><div class="fw-bold text-coffee">Aleena</div><div class="small text-muted">Rep</div></div>
                        <i data-lucide="chevron-right" class="text-muted"></i>
                    </button>
                </div>
            </div>
        </div>

        <div id="profile-screen" class="screen">
            <div class="px-4 py-3 d-flex align-items-center sticky-top" style="background-color: var(--bg-cream);">
                <i data-lucide="arrow-left" class="text-coffee" onclick="showScreen('app')" style="cursor:pointer;"></i>
                <span class="fw-bold text-coffee fs-5 ms-3" style="font-family: serif;">My Profile</span>
            </div>
            
            <div class="app-content px-4 pt-2">
                <div class="text-center mb-4">
                    <div class="bg-coffee text-white rounded-circle d-flex align-items-center justify-content-center fw-bold mx-auto mb-3 shadow" style="width:80px; height:80px; font-size: 2rem;" id="profileAvatarBig">U</div>
                    <h3 class="fw-bold text-coffee mb-0" style="font-family: serif;" id="profileNameBig">User Name</h3>
                    <p class="text-muted small" id="profileEmailBig">email@giki.edu.pk</p>
                    <span class="badge bg-secondary" id="profileRoleBig">Student</span>
                </div>

                <div class="card-vintage p-4">
                    <h6 class="text-coffee fw-bold mb-3 d-flex align-items-center gap-2">
                        <i data-lucide="credit-card" size="16"></i> Membership Status
                    </h6>
                    <div id="membershipStatusContainer"></div>
                </div>

                <div class="card-vintage">
                    <div class="d-flex justify-content-between align-items-center p-2">
                        <span class="text-coffee fw-bold small">Edit Profile</span>
                        <i data-lucide="chevron-right" class="text-muted" size="16"></i>
                    </div>
                    <hr class="my-1 opacity-25">
                    <div class="d-flex justify-content-between align-items-center p-2">
                        <span class="text-coffee fw-bold small">Payment Methods</span>
                        <i data-lucide="chevron-right" class="text-muted" size="16"></i>
                    </div>
                </div>
            </div>
        </div>

        <div id="app" class="screen">
            <div class="px-4 py-3 d-flex justify-content-between align-items-center sticky-top" style="background-color: var(--bg-cream); border-bottom: 1px solid #E5E0D8; z-index: 10;">
                <i data-lucide="menu" class="text-coffee" onclick="toggleMenu()" style="cursor:pointer;"></i>
                <span class="fw-bold text-coffee fs-5" style="font-family: serif;">GIKI Pulse</span>
                <div class="bg-coffee text-white rounded-circle d-flex align-items-center justify-content-center fw-bold shadow-sm" style="width:35px; height:35px; cursor: pointer;" id="headerAvatar" onclick="openProfile()">U</div>
            </div>

            <div class="app-content px-4 pt-3">
                <div id="tab-home" class="tab-content active">
                    <div id="alertContainer"></div>

                    <h6 class="text-coffee fw-bold mt-4 mb-3" style="font-family: serif;">Quick Actions</h6>
                    <div class="row g-2 text-center">
                        <div class="col-4">
                            <div class="bg-white p-3 rounded-4 border mb-1 shadow-sm" onclick="switchTab('book')"><i data-lucide="calendar" class="text-coffee"></i></div>
                            <small class="fw-bold text-coffee" style="font-size:10px;">Book</small>
                        </div>
                        <div class="col-4">
                            <div class="bg-white p-3 rounded-4 border mb-1 shadow-sm" onclick="openPaymentModal()"><i data-lucide="credit-card" class="text-coffee"></i></div>
                            <small class="fw-bold text-coffee" style="font-size:10px;">Pay Fee</small>
                        </div>
                        
                        <div class="col-4 role-coach d-none">
                            <div class="bg-success p-3 rounded-4 border mb-1 text-white shadow" onclick="alert('New Trial Created Successfully!')"><i data-lucide="plus"></i></div>
                            <small class="fw-bold text-coffee" style="font-size:10px;">New Trial</small>
                        </div>

                        <div class="col-4 role-rep d-none">
                            <div class="bg-info p-3 rounded-4 border mb-1 text-white shadow" onclick="alert('Event Request Draft Created')"><i data-lucide="file-text"></i></div>
                            <small class="fw-bold text-coffee" style="font-size:10px;">Request</small>
                        </div>

                        <div class="col-4 role-student-only">
                            <div class="bg-white p-3 rounded-4 border mb-1 shadow-sm" onclick="alert('Viewing History...')"><i data-lucide="history" class="text-coffee"></i></div>
                            <small class="fw-bold text-coffee" style="font-size:10px;">History</small>
                        </div>
                    </div>

                    <h6 class="text-coffee fw-bold mt-4 mb-3" style="font-family: serif;">Announcements</h6>
                    <div class="card-vintage">
                        <div class="d-flex justify-content-between mb-1"><span class="badge bg-secondary">Event</span><small class="text-muted">2 hrs ago</small></div>
                        <div class="fw-bold text-coffee">Inter-Faculty Tournament</div>
                    </div>
                    <div class="card-vintage">
                        <div class="d-flex justify-content-between mb-1"><span class="badge bg-danger">Alert</span><small class="text-muted">5 hrs ago</small></div>
                        <div class="fw-bold text-coffee">Pool Maintenance: Closed Today</div>
                    </div>
                </div>

                <!-- BOOK TAB -->
                <div id="tab-book" class="tab-content d-none">
                    <h4 class="text-coffee fw-bold mb-4" style="font-family: serif;">Today's Schedule</h4>
                    <div class="card-vintage d-flex gap-3 align-items-center">
                        <div class="bg-light rounded p-2 fs-4">üè∏</div>
                        <div class="flex-grow-1"><div class="fw-bold text-coffee">Squash Court A</div><div class="small text-muted">6:00 PM - 7:00 PM</div></div>
                        <span class="badge bg-success bg-opacity-10 text-success">Booked</span>
                    </div>
                    <div class="card-vintage d-flex gap-3 align-items-center">
                        <div class="bg-light rounded p-2 fs-4">üéæ</div>
                        <div class="flex-grow-1"><div class="fw-bold text-coffee">Tennis Court 1</div><div class="small text-muted">7:00 PM - 8:00 PM</div></div>
                        <button class="btn btn-sm btn-dark bg-coffee" onclick="alert('Booking Request Sent!')">Book</button>
                    </div>
                </div>

                <!-- ACTIVITY TAB -->
                <div id="tab-activity" class="tab-content d-none">
                    <h4 class="text-coffee fw-bold mb-4 role-title">Activity</h4>
                    <div class="role-coach d-none">
                        <div class="card-vintage border-success border-2">
                            <div class="d-flex justify-content-between"><h6 class="fw-bold">Active Trials</h6><span class="badge bg-success">Live</span></div>
                            <hr class="my-2">
                            <div class="d-flex justify-content-between align-items-center"><div><div class="fw-bold small">Football Team '25</div><div class="text-muted small">24 Applicants</div></div><i data-lucide="chevron-right"></i></div>
                        </div>
                    </div>
                    <div class="role-rep d-none">
                        <div class="card-vintage border-info border-2">
                            <h6 class="fw-bold">My Requests</h6>
                            <div class="bg-warning bg-opacity-10 p-2 rounded mt-2"><div class="fw-bold small">Concert Setup</div><div class="text-muted small">Pending Admin Approval</div></div>
                        </div>
                    </div>
                    <div class="card-vintage role-student-only">
                        <h6 class="fw-bold text-muted">Past History</h6>
                        <div class="d-flex justify-content-between small mt-2"><span>Swimming Pool</span><span class="text-muted">Aug 24</span></div>
                    </div>
                </div>
            </div>

            <div class="bottom-nav">
                <button class="nav-btn active" id="btn-home" onclick="switchTab('home')"><i data-lucide="home"></i><span class="mt-1">Home</span></button>
                <button class="nav-btn" id="btn-book" onclick="switchTab('book')"><i data-lucide="calendar"></i><span class="mt-1">Book</span></button>
                
                <button class="nav-btn" id="btn-activity" onclick="switchTab('activity')">
                    <span id="activity-icon-wrapper"><i data-lucide="trophy"></i></span>
                    <span class="mt-1" id="label-activity">Activity</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        const users = {
            mustafa: { name: 'Mustafa Shah', email: 'u2023485@giki.edu.pk', roles:['student'], avatar:'M', membership: 'Expired', alert:{type:'urgent', msg:'Gym Membership Expired'} },
            hamza: { name: 'Hamza Wajid', email: 'u2023085@giki.edu.pk', roles:['student', 'coach'], avatar:'H', membership: 'Active', alert:{type:'info', msg:'Football Trial: Today 5PM'} },
            aleena: { name: 'Aleena Shoaib', email: 'u2023167@giki.edu.pk', roles:['student', 'rep'], avatar:'A', membership: 'Active', alert:{type:'pending', msg:'Concert Request #204 Pending'} },
        };

        let currentUser = null;

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(el => el.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
            if (typeof lucide !== 'undefined') lucide.createIcons();
        }

        function login(userId) {
            currentUser = users[userId];
            updateUIForUser();
            showScreen('app');
        }

        function openProfile() {
            document.getElementById('profileAvatarBig').innerText = currentUser.avatar;
            document.getElementById('profileNameBig').innerText = currentUser.name;
            document.getElementById('profileEmailBig').innerText = currentUser.email;
            document.getElementById('profileRoleBig').innerText = currentUser.roles.join(' & ');
            renderMembershipStatus();
            showScreen('profile-screen');
        }

        function renderMembershipStatus() {
            const container = document.getElementById('membershipStatusContainer');
            if (currentUser.membership === 'Active') {
                container.innerHTML = `
                    <div class="bg-success bg-opacity-10 text-success p-3 rounded-3 d-flex justify-content-between align-items-center">
                        <div><div class="fw-bold">Active</div><small style="font-size:10px">Valid until Dec 31, 2025</small></div>
                        <i data-lucide="check-circle"></i>
                    </div>`;
            } else {
                container.innerHTML = `
                    <div class="bg-danger bg-opacity-10 text-danger p-3 rounded-3 mb-3 d-flex justify-content-between align-items-center">
                        <div><div class="fw-bold">Expired</div><small style="font-size:10px">Expired on Nov 01, 2025</small></div>
                        <i data-lucide="alert-circle"></i>
                    </div>
                    <button class="btn btn-dark w-100" onclick="openPaymentModal()">Renew Now</button>`;
            }
            if (typeof lucide !== 'undefined') lucide.createIcons();
        }

        function updateUIForUser() {
            document.getElementById('headerAvatar').innerText = currentUser.avatar;
            document.getElementById('menuAvatar').innerText = currentUser.avatar;
            document.getElementById('menuName').innerText = currentUser.name;
            document.getElementById('menuEmail').innerText = currentUser.email;
            document.getElementById('menuRole').innerText = currentUser.roles.join(' & ');

            document.querySelectorAll('.role-coach, .role-rep, .role-student-only').forEach(el => el.classList.add('d-none'));

            const iconWrapper = document.getElementById('activity-icon-wrapper');

            if(currentUser.roles.includes('coach')) {
                document.querySelectorAll('.role-coach').forEach(el => el.classList.remove('d-none'));
                document.getElementById('label-activity').innerText = 'Manage';
                iconWrapper.innerHTML = '<i data-lucide="briefcase"></i>';
            } else if(currentUser.roles.includes('rep')) {
                document.querySelectorAll('.role-rep').forEach(el => el.classList.remove('d-none'));
                document.getElementById('label-activity').innerText = 'Requests';
                iconWrapper.innerHTML = '<i data-lucide="file-text"></i>';
            } else {
                document.querySelectorAll('.role-student-only').forEach(el => el.classList.remove('d-none'));
                document.getElementById('label-activity').innerText = 'Activity';
                iconWrapper.innerHTML = '<i data-lucide="trophy"></i>';
            }

            const isUrgent = currentUser.alert.type === 'urgent';
            const alertHTML = `
                <div class="card-vintage border-start border-4 ${isUrgent ? 'border-danger bg-danger bg-opacity-10' : 'border-info bg-info bg-opacity-10'}">
                    <div class="d-flex gap-3">
                        <i data-lucide="${isUrgent ? 'alert-circle' : 'bell'}"></i>
                        <div>
                            <div class="fw-bold text-coffee">${isUrgent ? 'Attention Needed' : 'Update'}</div>
                            <small class="text-coffee opacity-75">${currentUser.alert.msg}</small>
                        </div>
                    </div>
                </div>`;
            document.getElementById('alertContainer').innerHTML = alertHTML;
            if (typeof lucide !== 'undefined') lucide.createIcons();
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('d-none'));
            document.getElementById(`tab-${tabName}`).classList.remove('d-none');
            document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
            document.getElementById(`btn-${tabName}`).classList.add('active');
        }

        function toggleMenu() {
            document.getElementById('drawer').classList.toggle('open');
            document.getElementById('drawerOverlay').classList.toggle('open');
        }

        function openPaymentModal() {
            document.getElementById('paymentModal').classList.add('open');
            document.getElementById('payStep1').classList.remove('d-none');
            document.getElementById('payStep2').classList.add('d-none');
            document.getElementById('payStep3').classList.add('d-none');
        }

        function closePaymentModal() {
            document.getElementById('paymentModal').classList.remove('open');
        }

        function selectPayment(element) {
            document.querySelectorAll('.payment-option').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
        }

        function processPayment() {
            document.getElementById('payStep1').classList.add('d-none');
            document.getElementById('payStep2').classList.remove('d-none');
            setTimeout(() => {
                document.getElementById('payStep2').classList.add('d-none');
                document.getElementById('payStep3').classList.remove('d-none');
                currentUser.membership = 'Active';
                currentUser.alert = {type: 'success', msg: 'Membership Renewed Successfully'};
                updateUIForUser(); 
                if (document.getElementById('profile-screen').classList.contains('active')) {
                    renderMembershipStatus(); 
                }
            }, 2000);
        }

        function completePayment() {
            closePaymentModal();
        }

        if (typeof lucide !== 'undefined') lucide.createIcons();
    </script>
</body>
</html>